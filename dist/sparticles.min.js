/**!
 * Sparticles - Lightweight, High Performance Particles in Canvas
 * @version 0.11.1
 * @license MPL-2.0
 * @author simeydotme <simey.me@gmail.com>
 */
var Sparticles=function(){"use strict";function t(t,i,e){return i in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}function i(t,i){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);i&&(s=s.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),e.push.apply(e,s)}return e}function e(e){for(var s=1;s<arguments.length;s++){var n=null!=arguments[s]?arguments[s]:{};s%2?i(n,!0).forEach((function(i){t(e,i,n[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var s=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60;this.fps=i,this.handler=t;var e=0;this.start=function(){var t=this;if(!this.started){var i=performance.now(),s=1e3/this.fps;e=requestAnimationFrame((function n(r){var a=r-i;e=requestAnimationFrame(n),a>=s-0&&(t.handler(a),i=r-a%s)})),this.started=!0}},this.stop=function(){cancelAnimationFrame(e),this.started=!1}},n=function(t){return[Math.cos(a(t-90)),Math.sin(a(t-90))]},r=function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.max(i,Math.min(e,t))},a=function(t){return t*Math.PI/180},h=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Math.random();return t===i?e=t:(0!==t||1!==i)&&i>t&&(e=e*(i-t)+t),e},o=function(t){return t[Math.floor(h(0,t.length))]},c=function(t){return t>h()},l=function(t){return.5+t|0},p=function(t){return t?(this.canvas=t.canvas,this.images=t.images,this.settings=t.settings,this.ctx=t.canvas.getContext("2d"),this.setup(),this.init()):console.warn("Invalid parameters given to Sparticle()",arguments),this};p.prototype.setup=function(){var t=this.settings;this.frame=0,this.frameoffset=l(h(0,360)),this.size=l(h(t.minSize,t.maxSize)),this.da=this.getAlphaDelta(),this.dx=this.getDeltaX(),this.dy=this.getDeltaY(),this.dd=this.getDriftDelta(),this.dr=this.getRotationDelta(),this.alpha=h(t.minAlpha,t.maxAlpha),this.shape=this.getShapeOrImage(),this.style=this.getStyle(),this.color=this.getColor(),this.rotation=t.rotate?a(h(0,360)):0},p.prototype.init=function(){this.initPosition()},p.prototype.initPosition=function(){var t=this.settings,i=this.canvas;t.bounce?0===t.speed?(t.alphaSpeed>0&&(this.alpha=0),this.px=i.width/2-this.size/2,this.py=i.height/2-this.size/2):(this.px=l(h(2,i.width-this.size-2)),this.py=l(h(2,i.height-this.size-2))):(this.px=l(h(2*-this.size,i.width+this.size)),this.py=l(h(2*-this.size,i.height+this.size)))},p.prototype.reset=function(){this.setup(),this.py<0?this.py=this.canvas.height+2*this.size:this.py>this.canvas.height&&(this.py=0-2*this.size),this.px<0?this.px=this.canvas.width+2*this.size:this.px>this.canvas.width&&(this.px=0-2*this.size)},p.prototype.bounce=function(){(this.py<=0||this.py+this.size>=this.canvas.height)&&(this.dy=-this.dy),(this.px<=0||this.px+this.size>=this.canvas.width)&&(this.dx=-this.dx)},p.prototype.isOffCanvas=function(){var t=0-2*this.size,i=this.canvas.height+2*this.size,e=this.canvas.width+2*this.size;return this.px<t||this.px>e||this.py<t||this.py>i},p.prototype.isTouchingEdge=function(){var t=this.canvas.height-this.size,i=this.canvas.width-this.size;return this.px<0||this.px>i||this.py<0||this.py>t},p.prototype.getColor=function(){if(Array.isArray(this.settings.color))return o(this.settings.color)},p.prototype.getShapeOrImage=function(){var t=this.settings.shape;if(Array.isArray(t))return"image"===t[0]&&this.images?o(this.images):o(t)},p.prototype.getStyle=function(){var t=this.settings.style;return"fill"!==t&&"stroke"!==t&&(t=o(["fill","stroke"])),t},p.prototype.getDelta=function(){var t=.1*this.settings.speed;return this.settings.speed&&this.settings.parallax?t+this.size*this.settings.parallax/50:t},p.prototype.getDeltaVariance=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=this.settings.speed||10;return t>0?h(-t,t)*i/100:0},p.prototype.getDeltaX=function(){var t=this.getDelta(),i=this.getDeltaVariance(this.settings.xVariance);return n(this.settings.direction)[0]*t+i},p.prototype.getDeltaY=function(){var t=this.getDelta(),i=this.getDeltaVariance(this.settings.yVariance);return n(this.settings.direction)[1]*t+i},p.prototype.getAlphaDelta=function(){var t=this.settings.alphaVariance,i=h(1,t+1);return c(.5)&&(i=-i),i},p.prototype.getDriftDelta=function(){return this.settings.drift?h(this.settings.drift-this.settings.drift/2,this.settings.drift+this.settings.drift/2):0},p.prototype.getRotationDelta=function(){var t=0;return this.settings.rotate&&this.settings.rotation&&(t=a(h(.5,1.5)*this.settings.rotation),c(.5)&&(t=-t)),t},p.prototype.update=function(){return this.frame+=1,this.updatePosition(),this.updateAlpha(),this},p.prototype.updateAlpha=function(){return this.settings.alphaSpeed>0&&(this.settings.twinkle?this.alpha=this.updateTwinkle():this.alpha=this.updateFade()),this.alpha},p.prototype.updateFade=function(){var t=this.da/1e3*this.settings.alphaSpeed*.5,i=this.alpha+t,e=this.da>0&&i>this.settings.maxAlpha,s=this.da<0&&i<this.settings.minAlpha;return(e||s)&&(this.da=-this.da,i=this.settings.maxAlpha,s&&(i=this.settings.minAlpha)),i},p.prototype.updateTwinkle=function(){var t=this.alpha,i=Math.abs(this.da),e=t>this.settings.maxAlpha,s=t<this.settings.minAlpha,n=i/1e3*this.settings.alphaSpeed*.5;return this.resettingTwinkle?t+=.02*this.settings.alphaSpeed:t-=n,s?(this.resettingTwinkle=!0,t=this.settings.minAlpha):e&&(this.resettingTwinkle=!1,t=this.settings.maxAlpha),t},p.prototype.updatePosition=function(){this.settings.bounce&&this.isTouchingEdge()?(this.bounce(),this.px+=this.dx,this.py+=this.dy):this.isOffCanvas()?this.reset():(this.px+=this.dx,this.py+=this.dy,this.updateDrift(),this.updateRotation())},p.prototype.updateRotation=function(){this.settings.rotate&&this.settings.rotation&&(this.rotation+=this.dr)},p.prototype.updateDrift=function(){this.settings.drift&&this.settings.speed&&(this.settings.direction>150&&this.settings.direction<210||this.settings.direction>330&&this.settings.direction<390||this.settings.direction>-30&&this.settings.direction<30?this.px+=n(this.frame+this.frameoffset)[0]*this.dd/(15*this.getDelta()):(this.settings.direction>60&&this.settings.direction<120||this.settings.direction>240&&this.settings.direction<300)&&(this.py+=n(this.frame+this.frameoffset)[1]*this.dd/(15*this.getDelta())))},p.prototype.render=function(t){var i=t[this.color][this.shape][this.style],e=i.width,s=this.size/e,n=this.px/s,a=this.py/s;return this.renderRotate(),this.ctx.globalAlpha=r(this.alpha,0,1),this.ctx.transform(s,0,0,s,0,0),this.ctx.globalCompositeOperation!==this.settings.composition&&(this.ctx.globalCompositeOperation=this.settings.composition),this.ctx.drawImage(i,0,0,e,e,n,a,e,e),this.ctx.setTransform(1,0,0,1,0,0),this},p.prototype.renderRotate=function(){if(this.settings.rotate){var t=this.px+this.size/2,i=this.py+this.size/2;this.ctx.translate(t,i),this.ctx.rotate(this.rotation),this.ctx.translate(-t,-i)}};var g=function(t){var i=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;1!==arguments.length||arguments[0]instanceof HTMLElement||(s=t,t=void 0);var a={alphaSpeed:10,alphaVariance:1,bounce:!1,color:"white",composition:"source-over",count:50,direction:180,drift:1,glow:0,imageUrl:"",maxAlpha:1,maxSize:10,minAlpha:0,minSize:1,parallax:1,rotate:!0,rotation:1,shape:"circle",speed:10,style:"fill",twinkle:!1,xVariance:2,yVariance:2};return this.el=t||document.body,this.settings=e({},a,{},s),this.init(n,r),window.addEventListener("resize",(function(){clearTimeout(i.resizeTimer),i.resizeTimer=setTimeout((function(){i.setCanvasSize(),i.createSparticles()}),200)})),this};return g.prototype.init=function(t,i){var e=this;this.sparticles=[],this.createColorArray(),this.createShapeArray(),this.setupMainCanvas(t,i),this.setupOffscreenCanvasses((function(){e.createSparticles(),e.start()}))},g.prototype.start=function(){var t=this;this.loop||(this.loop=new s((function(i){t.drawFrame(i)}))),this.loop.start()},g.prototype.stop=function(){this.loop.stop()},g.prototype.destroy=function(){for(var t in this.stop(),this.el.removeChild(this.canvas),this)this.hasOwnProperty(t)&&delete this[t]},g.prototype.setCanvasSize=function(t,i){return void 0===this.resizable&&(this.resizable=!t&&!i),this.resizable?(this.width=this.el.clientWidth,this.height=this.el.clientHeight):(this.width=t,this.height=i),this.canvas.width=this.width,this.canvas.height=this.height,this.canvas},g.prototype.createColorArray=function(){if(!Array.isArray(this.settings.color))if("rainbow"===this.settings.color){this.settings.color=[];for(var t=0;t<100;t++)this.settings.color[t]=(i=void 0,e=void 0,s=void 0,i=l(h(0,360)),e=l(h(90,100)),s=l(h(45,85)),"hsl(".concat(i,",").concat(e,"%,").concat(s,"%)"))}else this.settings.color=[this.settings.color];var i,e,s;return this.settings.color},g.prototype.createShapeArray=function(){return Array.isArray(this.settings.shape)||("random"===this.settings.shape?this.settings.shape=["square","circle","triangle","diamond"]:this.settings.shape=[this.settings.shape]),this.settings.shape},g.prototype.setupMainCanvas=function(t,i){return this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.ctx.globalCompositeOperation=this.settings.composition,this.setCanvasSize(t,i),this.el.appendChild(this.canvas),this.canvas},g.prototype.setupOffscreenCanvasses=function(t){var i=this;this.canvasses=this.canvasses||{},this.settings.color.forEach((function(e){i.canvasses[e]=i.canvasses[e]||{},"image"===i.settings.shape[0]?i.loadAndDrawImages(e,t):i.settings.shape.forEach((function(s){i.canvasses[e][s]=i.canvasses[e][s]||{},["fill","stroke"].forEach((function(n){i.canvasses[e][s][n]=document.createElement("canvas");var r=i.canvasses[e][s][n],a=r.getContext("2d");switch(s){case"square":i.drawOffscreenCanvasForSquare(r,a,e,n),t&&t();break;case"line":i.drawOffscreenCanvasForLine(r,a,e,n),t&&t();break;case"triangle":i.drawOffscreenCanvasForTriangle(r,a,e,n),t&&t();break;case"diamond":i.drawOffscreenCanvasForDiamond(r,a,e,n),t&&t();break;case"star":i.drawOffscreenCanvasForStar(r,a,e,n),t&&t();break;case"circle":default:i.drawOffscreenCanvasForCircle(r,a,e,n),t&&t()}}))}))}))},g.prototype.getGlowSize=function(t){return this.settings.glow},g.prototype.getLineSize=function(t){return r(t/20,1,5)},g.prototype.renderStyle=function(t,i,e,s){"fill"===s?t.fillStyle=i:(t.lineWidth=e,t.strokeStyle=i)},g.prototype.renderGlow=function(t,i,e){var s=this.getGlowSize(e)/2;t.shadowColor=i,t.shadowBlur=s},g.prototype.renderColor=function(t,i){"fill"===i?t.fill():t.stroke()},g.prototype.drawOffscreenCanvasForSquare=function(t,i,e,s){var n=this.settings.maxSize,r=this.getLineSize(n),a=n+r+this.getGlowSize(n);return t.width=a,t.height=a,this.renderGlow(i,e,n),this.renderStyle(i,e,r,s),i.beginPath(),i.rect(a/2-n/2,a/2-n/2,n,n),this.renderColor(i,s),t},g.prototype.drawOffscreenCanvasForLine=function(t,i,e,s){var n=2*this.settings.maxSize,r=this.getLineSize(n),a=n+r+this.getGlowSize(n),h=a/2-n/2,o=a/2-n/2;return t.width=a,t.height=a,this.renderGlow(i,e,n),i.lineWidth=r,i.strokeStyle=e,i.beginPath(),i.moveTo(h,o),i.lineTo(h+n,o+n),i.stroke(),i.closePath(),t},g.prototype.drawOffscreenCanvasForTriangle=function(t,i,e,s){var n=this.settings.maxSize,r=this.getLineSize(n),a=n+r+this.getGlowSize(n),h=n*(Math.sqrt(3)/2),o=a/2,c=a/2-n/2;return t.width=a,t.height=a,this.renderGlow(i,e,n),this.renderStyle(i,e,r,s),i.beginPath(),i.moveTo(o,c),i.lineTo(o-n/2,c+h),i.lineTo(o+n/2,c+h),i.closePath(),this.renderColor(i,s),t},g.prototype.drawOffscreenCanvasForDiamond=function(t,i,e,s){var n=this.settings.maxSize,r=n/2,a=this.getLineSize(n),h=n+a+this.getGlowSize(n),o=h/2,c=.08*n,l=.02*n,p=o-r,g=o;return t.width=h,t.height=h,this.renderGlow(i,e,n),this.renderStyle(i,e,a,s),i.beginPath(),i.moveTo(p+l,g),i.bezierCurveTo(o-c/2,o-2*c,o-2*c,o-c/2,o,o-r),i.bezierCurveTo(o+2*c,o-c/2,o+c/2,o-2*c,o+r-l,o),i.bezierCurveTo(o+c/2,o+2*c,o+2*c,o+c/2,o,o+r),i.bezierCurveTo(o-2*c,o+c/2,o-c/2,o+2*c,p+l,g),i.closePath(),this.renderColor(i,s),t},g.prototype.drawOffscreenCanvasForStar=function(t,i,e,s){var n=this.getLineSize(52),r=this.getGlowSize(52),a=52+2*n+r;return t.width=a,t.height=a,this.renderGlow(i,e,52),this.renderStyle(i,e,n,s),i.translate(n/2+r/2,n/2+r/2-1),i.beginPath(),i.moveTo(27.76,2.07),i.lineTo(34.28,15.46),i.translate(36.01480792437574,14.614221385040288),i.arc(0,0,1.93,2.687967128721911,1.7293919056045395,1),i.translate(-36.01480792437574,-14.614221385040288),i.lineTo(50.37,18.7),i.translate(50.10443046629834,20.601544851632347),i.arc(0,0,1.92,-1.4320339785975214,.8159284165499665,0),i.translate(-50.10443046629834,-20.601544851632347),i.lineTo(40.78,32.36),i.translate(42.13415324373887,33.735197801216785),i.arc(0,0,1.93,-2.3484841809999386,-3.3054346524687857,1),i.translate(-42.13415324373887,-33.735197801216785),i.lineTo(42.7,48.76),i.translate(40.81489078457234,49.06734873663269),i.arc(0,0,1.91,-.16161824093711977,2.052504457600845,0),i.translate(-40.81489078457234,-49.06734873663269),i.lineTo(26.83,43.76),i.translate(25.939999999999998,45.438660180024534),i.arc(0,0,1.9,-1.083293536758034,-2.0582991168317593,1),i.translate(-25.939999999999998,-45.438660180024534),i.lineTo(11.92,50.7),i.translate(11.046023488962076,49.00168758523234),i.arc(0,0,1.91,1.0955254432622383,3.3002085355055915,0),i.translate(-11.046023488962076,-49.00168758523234),i.lineTo(11.7,34),i.translate(9.820265754085725,33.66132734870218),i.arc(0,0,1.91,.178258078542773,-.7933922953534395,1),i.translate(-9.820265754085725,-33.66132734870218),i.lineTo(.57,21.85),i.translate(1.9278161466350117,20.478418681981545),i.arc(0,0,1.93,2.351151232528948,4.5627030955491055,0),i.translate(-1.9278161466350117,-20.478418681981545),i.lineTo(16.31,16.47),i.translate(16.062056630005188,14.576161547207466),i.arc(0,0,1.91,1.4406156600933306,.4870016654036473,1),i.translate(-16.062056630005188,-14.576161547207466),i.lineTo(24.33,2.07),i.translate(26.045,2.9107585860400085),i.arc(0,0,1.91,-2.6857849028374465,-.45580775075234703,0),i.translate(-26.045,-2.9107585860400085),i.closePath(),this.renderColor(i,s),t},g.prototype.drawOffscreenCanvasForCircle=function(t,i,e,s){var n=this.settings.maxSize,r=this.getLineSize(n),a=n+r+this.getGlowSize(n);return t.width=a,t.height=a,this.renderGlow(i,e,n),this.renderStyle(i,e,r,s),i.beginPath(),i.ellipse(a/2,a/2,n/2,n/2,0,0,360),this.renderColor(i,s),t},g.prototype.loadAndDrawImages=function(t,i){var e=this,s=this.settings.imageUrl,n=Array.isArray(s)?s:[s],r=n.length,a=0;this.images=[],n.forEach((function(s,n){var h="image"+n;e.images.push(h),e.canvasses[t][h]=document.createElement("canvas");var o=e.canvasses[t][h],c=o.getContext("2d"),l=new Image;l.onload=function(){a++,e.drawImageOffscreenCanvas(l,o,c,t),i&&a===r&&i()},l.onerror=function(){console.error("failed to load source image: ",s)},l.src=s}))},g.prototype.drawImageOffscreenCanvas=function(t,i,e,s){var n=t.width;return i.width=n,i.height=n,e.drawImage(t,0,0,n,n,0,0,n,n),e.globalCompositeOperation="source-atop",e.fillStyle=s,e.fillRect(0,0,n,n),i},g.prototype.createSparticles=function(){this.sparticles=[];for(var t=0;t<this.settings.count;t++)this.sparticles.push(new p(this));return this.sparticles.sort((function(t,i){return t.size>i.size})),this.sparticles},g.prototype.drawFrame=function(){this.ctx.clearRect(0,0,this.width,this.height);var t=!0,i=!1,e=void 0;try{for(var s,n=this.sparticles[Symbol.iterator]();!(t=(s=n.next()).done);t=!0){s.value.update().render(this.canvasses)}}catch(t){i=!0,e=t}finally{try{t||null==n.return||n.return()}finally{if(i)throw e}}return this.sparticles},g}();
