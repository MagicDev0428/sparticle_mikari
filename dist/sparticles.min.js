/**!
 * Sparticles - Lightweight, High Performance Particles in Canvas
 * @version 0.8.3
 * @license MPL-2.0
 * @author simeydotme <simey.me@gmail.com>
 */
var sparticles=function(t){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function e(t,i,e){return i in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}function s(t,i){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);i&&(s=s.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),e.push.apply(e,s)}return e}function n(t){for(var i=1;i<arguments.length;i++){var n=null!=arguments[i]?arguments[i]:{};i%2?s(n,!0).forEach((function(i){e(t,i,n[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(n).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))}))}return t}var r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60;this.fps=i,this.handler=t;var e=0;this.start=function(){var t=this;if(!this.started){var i=performance.now(),s=1e3/this.fps;e=requestAnimationFrame((function n(r){var a=r-i;e=requestAnimationFrame(n),a>=s-0&&(t.handler(a),i=r-a%s)})),this.started=!0}},this.stop=function(){cancelAnimationFrame(e),this.started=!1}},a=function(t){return[Math.cos(h(t-90)),Math.sin(h(t-90))]},o=function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.max(i,Math.min(e,t))},h=function(t){return t*Math.PI/180},l=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Math.random();return(0!==t||1!==i)&&i>t&&(e=e*(i-t)+t),e},c=function(t){return t[Math.floor(l(0,t.length))]},p=function(t){return.5+t|0},g=function(t){return t?(this.canvas=t.canvas,this.images=t.images,this.settings=t.settings,this.ctx=this.canvas.getContext("2d"),this.init()):console.warn("Invalid parameters given to Sparticle()",arguments),this};g.prototype.init=function(){this.setup(),this.alpha=l(this.settings.minAlpha,this.settings.maxAlpha),this._alpha=this.alpha,this.shape=this.getShape(),this.fillColor=this.getColor(),this.strokeColor=this.getColor(),this.px=p(l(2*-this.size,this.canvas.width+this.size)),this.py=p(l(2*-this.size,this.canvas.height+this.size)),this.rotation=this.settings.rotation?h(l(0,360)):0},g.prototype.setup=function(){var t=this.settings;this.frame=0,this.frameoffset=p(l(0,360)),this.size=p(l(t.minSize,t.maxSize)),this.da=this.getAlphaDelta(),this.dx=this.getDeltaX(),this.dy=this.getDeltaY(),this.df=this.getFloatDelta(),this.dr=this.getRotationDelta()},g.prototype.isOffCanvas=function(){var t=0-3*this.size,i=this.canvas.height+3*this.size,e=this.canvas.width+3*this.size;return this.px<t||this.px>e||this.py<t||this.py>i},g.prototype.reset=function(){this.setup(),this.py<0?this.py=this.canvas.height+2*this.size:this.py>this.canvas.height&&(this.py=0-2*this.size),this.px<0?this.px=this.canvas.width+2*this.size:this.px>this.canvas.width&&(this.px=0-2*this.size)},g.prototype.getColor=function(){if(Array.isArray(this.settings.color))return c(this.settings.color)},g.prototype.getShape=function(){var t=this.settings.shape;if(Array.isArray(t))return"image"===t[0]&&this.images?c(this.images):c(t)},g.prototype.getDelta=function(){var t=.1*this.settings.speed;return this.settings.speed&&this.settings.parallax?t+this.size*this.settings.parallax/50:t},g.prototype.getDeltaX=function(){var t=this.getDelta(),i=this.getDeltaVariance(this.settings.xVariance);return a(this.settings.direction)[0]*t+i},g.prototype.getDeltaY=function(){var t=this.getDelta(),i=this.getDeltaVariance(this.settings.yVariance);return a(this.settings.direction)[1]*t+i},g.prototype.getDeltaVariance=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=this.settings.speed||10;return t>0?l(-t,t)*i/100:0},g.prototype.getAlphaDelta=function(){var t=this.settings.twinkle?0:this.settings.alphaVariance,i=-this.settings.alphaVariance;return l(i,t)/10},g.prototype.getFloatDelta=function(){return this.settings.float?l(this.settings.float-this.settings.float/2,this.settings.float+this.settings.float/2):0},g.prototype.getRotationDelta=function(){var t=0;return this.settings.rotation&&(t=h(l(.5,1.5)*this.settings.rotation),.5>l()&&(t=-t)),t},g.prototype.update=function(){return this.frame+=1,this.updatePosition(),this.updateAlpha(),this},g.prototype.updateAlpha=function(){var t=this.da/1e3*this.settings.alphaSpeed*10;this.settings.alphaSpeed>0&&(this.settings.twinkle?this.updateTwinkle(t):this.updateFade(t)),this.alpha=o(this._alpha,0,1)},g.prototype.updateFade=function(t){this._alpha+=t;var i=this.da>0&&this._alpha>this.settings.maxAlpha,e=this.da<0&&this._alpha<this.settings.minAlpha;(i||e)&&(this.da=-this.da,this._alpha=this.settings.maxAlpha,e&&(this._alpha=this.settings.minAlpha))},g.prototype.updateTwinkle=function(t){this._alpha+=t;var i=this._alpha>this.settings.maxAlpha;this._alpha<this.settings.minAlpha?this.resettingTwinkle=!0:i&&(this.resettingTwinkle=!1),this.resettingTwinkle&&(this._alpha+=.02*this.settings.alphaSpeed)},g.prototype.updatePosition=function(){this.isOffCanvas()?this.reset():(this.px+=this.dx,this.py+=this.dy,this.updateRotate(),this.updateFloat())},g.prototype.updateRotate=function(){this.rotation+=this.dr},g.prototype.updateFloat=function(){this.settings.float&&this.settings.speed&&(this.settings.direction>160&&this.settings.direction<200||this.settings.direction>340&&this.settings.direction<380||this.settings.direction>-20&&this.settings.direction<20?this.px+=a(this.frame+this.frameoffset)[0]*this.df/(15*this.getDelta()):(this.settings.direction>70&&this.settings.direction<110||this.settings.direction>250&&this.settings.direction<290)&&(this.py+=a(this.frame+this.frameoffset)[1]*this.df/(15*this.getDelta())))},g.prototype.render=function(t){var i=t[this.fillColor][this.shape],e=i.width,s=this.size/e,n=this.px/s,r=this.py/s;return this.renderRotate(),this.ctx.globalAlpha=this.alpha,this.ctx.transform(s,0,0,s,0,0),this.ctx.globalCompositeOperation!==this.settings.composition&&(this.ctx.globalCompositeOperation=this.settings.composition),this.ctx.drawImage(i,0,0,e,e,n,r,e,e),this.ctx.setTransform(1,0,0,1,0,0),this},g.prototype.renderRotate=function(){if(this.settings.rotation>0){var t=this.px+this.size/2,i=this.py+this.size/2;this.ctx.translate(t,i),this.ctx.rotate(this.rotation),this.ctx.translate(-t,-i)}};var u=function(t){var e=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;1===arguments.length&&"object"===i(arguments[0])&&(s=t,t=void 0);var o={alphaSpeed:10,alphaVariance:1,color:"white",composition:"source-over",count:50,direction:180,float:1,glow:0,imageUrl:"",maxAlpha:1,maxSize:10,minAlpha:0,minSize:1,parallax:1,rotation:1,shape:"circle",speed:10,style:"fill",twinkle:!1,xVariance:2,yVariance:2};return this.el=t||document.body,this.settings=n({},o,{},s),this.init(r,a),window.addEventListener("resize",(function(){clearTimeout(e.resizeTimer),e.resizeTimer=setTimeout((function(){e.setCanvasSize(),e.createSparticles()}),200)})),this};return u.prototype.init=function(t,i){var e=this;this.sparticles=[],this.createColorArray(),this.createShapeArray(),this.setupMainCanvas(t,i),this.setupOffscreenCanvasses((function(){e.createSparticles(),e.start()}))},u.prototype.start=function(){var t=this;this.loop||(this.loop=new r((function(i){t.render(i)}))),this.loop.start()},u.prototype.stop=function(){this.loop.stop()},u.prototype.destroy=function(){this.stop(),this.sparticles=null,this.canvasses=null,this.start=null,this.stop=null,this.init=null,this.settings=null,this.el.removeChild(this.canvas)},u.prototype.setCanvasSize=function(t,i){return void 0===this.resizable&&(this.resizable=!t&&!i),this.resizable?(this.width=this.el.clientWidth,this.height=this.el.clientHeight):t&&i&&(this.width=t,this.height=i),this.canvas.width=this.width,this.canvas.height=this.height,this.canvas},u.prototype.createColorArray=function(){if(!Array.isArray(this.settings.color))if("rainbow"===this.settings.color){this.settings.color=[];for(var t=0;t<50;t++)this.settings.color[t]=(i=void 0,e=void 0,s=void 0,i=p(l(0,360)),e=p(l(90,100)),s=p(l(45,85)),"hsl(".concat(i,",").concat(e,"%,").concat(s,"%)"))}else this.settings.color=[this.settings.color];var i,e,s;return this.settings.color},u.prototype.createShapeArray=function(){return Array.isArray(this.settings.shape)||("random"===this.settings.shape?this.settings.shape=["square","circle","triangle","diamond"]:this.settings.shape=[this.settings.shape]),this.settings.shape},u.prototype.setupMainCanvas=function(t,i){return this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.ctx.globalCompositeOperation=this.settings.composition,this.setCanvasSize(t,i),this.el.appendChild(this.canvas),this.canvas},u.prototype.setupOffscreenCanvasses=function(t){var i=this;this.canvasses=this.canvasses||{},this.settings.color.forEach((function(e){i.canvasses[e]=i.canvasses[e]||{},"image"===i.settings.shape[0]?i.loadAndDrawImages(e,t):i.settings.shape.forEach((function(s){i.canvasses[e][s]=document.createElement("canvas");var n=i.canvasses[e][s],r=n.getContext("2d");switch(s){case"square":i.drawOffscreenCanvasForSquare(n,r,e),t&&t();break;case"line":i.drawOffscreenCanvasForLine(n,r,e),t&&t();break;case"triangle":i.drawOffscreenCanvasForTriangle(n,r,e),t&&t();break;case"diamond":i.drawOffscreenCanvasForDiamond(n,r,e),t&&t();break;case"circle":default:i.drawOffscreenCanvasForCircle(n,r,e),t&&t()}}))}))},u.prototype.getGlowSize=function(t){return this.settings.glow},u.prototype.getLineSize=function(t){return o(t/20,1,5)},u.prototype.renderStyle=function(t,i,e){"fill"===this.settings.style?t.fillStyle=i:(t.lineWidth=e,t.strokeStyle=i)},u.prototype.renderGlow=function(t,i,e){var s=this.getGlowSize(e)/2;t.shadowColor=i,t.shadowBlur=s},u.prototype.renderColor=function(t){"fill"===this.settings.style?t.fill():t.stroke()},u.prototype.drawOffscreenCanvasForSquare=function(t,i,e){var s=this.settings.maxSize,n=this.getLineSize(s),r=s+n+this.getGlowSize(s);return t.width=r,t.height=r,this.renderGlow(i,e,s),this.renderStyle(i,e,n),i.beginPath(),i.rect(r/2-s/2,r/2-s/2,s,s),this.renderColor(i,e),t},u.prototype.drawOffscreenCanvasForLine=function(t,i,e){var s=2*this.settings.maxSize,n=this.getLineSize(s),r=s+n+this.getGlowSize(s),a=r/2-s/2,o=r/2-s/2;return t.width=r,t.height=r,this.renderGlow(i,e,s),i.lineWidth=n,i.strokeStyle=e,i.beginPath(),i.moveTo(a,o),i.lineTo(a+s,o+s),i.stroke(),i.closePath(),t},u.prototype.drawOffscreenCanvasForTriangle=function(t,i,e){var s=this.settings.maxSize,n=this.getLineSize(s),r=s+n+this.getGlowSize(s),a=s*(Math.sqrt(3)/2),o=r/2,h=r/2-s/2;return t.width=r,t.height=r,this.renderGlow(i,e,s),this.renderStyle(i,e,n),i.beginPath(),i.moveTo(o,h),i.lineTo(o-s/2,h+a),i.lineTo(o+s/2,h+a),i.closePath(),this.renderColor(i,e),t},u.prototype.drawOffscreenCanvasForDiamond=function(t,i,e){var s=this.settings.maxSize,n=s/2,r=this.getLineSize(s),a=s+r+this.getGlowSize(s),o=a/2,h=.08*s,l=.02*s,c=o-n,p=o;return t.width=a,t.height=a,this.renderGlow(i,e,s),this.renderStyle(i,e,r),i.beginPath(),i.moveTo(c+l,p),i.bezierCurveTo(o-h/2,o-2*h,o-2*h,o-h/2,o,o-n),i.bezierCurveTo(o+2*h,o-h/2,o+h/2,o-2*h,o+n-l,o),i.bezierCurveTo(o+h/2,o+2*h,o+2*h,o+h/2,o,o+n),i.bezierCurveTo(o-2*h,o+h/2,o-h/2,o+2*h,c+l,p),i.closePath(),this.renderColor(i,e),t},u.prototype.drawOffscreenCanvasForCircle=function(t,i,e){var s=this.settings.maxSize,n=this.getLineSize(s),r=s+n+this.getGlowSize(s);return t.width=r,t.height=r,this.renderGlow(i,e,s),this.renderStyle(i,e,n),i.beginPath(),i.ellipse(r/2,r/2,s/2,s/2,0,0,360),this.renderColor(i,e),t},u.prototype.loadAndDrawImages=function(t,i){var e=this,s=this.settings.imageUrl,n=Array.isArray(s)?s:[s],r=n.length,a=0;this.images=[],n.forEach((function(s,n){var o="image"+n;e.images.push(o),e.canvasses[t][o]=document.createElement("canvas");var h=e.canvasses[t][o],l=h.getContext("2d"),c=new Image;c.onload=function(){a++,e.drawImageOffscreenCanvas(c,h,l,t),i&&a===r&&i()},c.onerror=function(){console.error("failed to load source image: ",s)},c.src=s}))},u.prototype.drawImageOffscreenCanvas=function(t,i,e,s){var n=t.width;return i.width=n,i.height=n,e.drawImage(t,0,0,n,n,0,0,n,n),e.globalCompositeOperation="source-atop",e.fillStyle=s,e.fillRect(0,0,n,n),i},u.prototype.createSparticles=function(){this.sparticles=[];for(var t=0;t<this.settings.count;t++)this.sparticles.push(new g(this));return this.sparticles.sort((function(t,i){return t.size>i.size})),this.sparticles},u.prototype.render=function(){this.ctx.clearRect(0,0,this.width,this.height);var t=!0,i=!1,e=void 0;try{for(var s,n=this.sparticles[Symbol.iterator]();!(t=(s=n.next()).done);t=!0){s.value.update().render(this.canvasses)}}catch(t){i=!0,e=t}finally{try{t||null==n.return||n.return()}finally{if(i)throw e}}return this.sparticles},t.Sparticles=u,t}({});
